### Как сдавать задания

Привет! 

Вы уже изучили блок «Системы управления версиями», и начиная с этого занятия все ваши работы будут приниматься ссылками на .md-файлы.

---


# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

## Обязательные задания

1. Есть скрипт:
	```bash
	a=1
	b=2
	c=a+b
	d=$a+$b
	e=$(($a+$b))
	```
    * Какие значения переменным c,d,e будут присвоены?
    * Почему?
    * c = a+b   поскольку она умолчанию определена как строковая переменная
    * d = 1+2  поскольку a и b это простые числовые значения, а bash выводит выражение как последовательность переменных и знак +здесь выводится как текст.
    * e = 3  поскольку выражение заключено в двойные скобки и bash уже может посчитать формулу

1. На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
	```bash
	while ((1==1))
	do
	curl https://localhost:4757
	if (($? != 0))
	then
	date >> curl.log
	fi
	done
	#добавлена ")" в первую строку скрипта
	```
1. Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.
```bash 
	#!/usr/bin/env bash
	PORT=80
	LOG_DIR=curl.log
	HOST=("192.168.0.1" "173.194.222.113" "87.250.250.242")
	COUNT=5
	while (($COUNT > 0))
	do
	
			for url in ${HOST[@]}
			do
					CURL_OUT=$(curl -s -S -m 1  -I $url:$PORT 2>1 1>/dev/null \
							&& echo host $url is ok || echo host $url unreachable )
					echo $(date "+%F-%H-%M-%S") ---- $CURL_OUT >> $LOG_DIR
			done
	let "COUNT=COUNT-1"
	done


```
1. Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается
```bash
#!/usr/bin/env bash
PORT=80
LOG_DIR=curl.log
LOG_DIR_err=curl_err.log
HOST=("173.194.222.113" "87.250.250.242" "192.168.0.1")
COUNT=5
while (($COUNT > 0))
do
	for url in ${HOST[@]}
	do
		CURL_OUT=$(curl -s -S -m 1  -I $url:$PORT 2>1 1>/dev/null \
		       && echo 0 || echo  1   )
		if [ $CURL_OUT = 1 ]  
		then
			echo $(date "+%F-%H-%M-%S") ---- $url  >> $LOG_DIR_err
			exit
		elif [ $CURL_OUT = 0 ]
		then
			echo $(date "+%F-%H-%M-%S") ---- $url is OK  >> $LOG_DIR
		fi
	done	
let "COUNT=COUNT-1"
done
 

```